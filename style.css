/* === Base === */
html, body {
  margin: 0;
  padding: 0;
  height: 100%;
  width: 100%;
  background: black;
  font-family: 'Inter', sans-serif;
  color: gold;
  overflow: hidden;
}

body.theme-dark {
  background: #000;
  color: #facc15;
}

body.theme-light {
  background: #fff9e6;
  color: #2f1b00;
}

/* === Map === */
#map {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 72px; /* leave room for floating nav */
  z-index: 0;
  height: 100vh;
}

/* Smooth mobile scrolling for sidebars */
#marketplaceContent,
#activityContent,
#entertainmentContent {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

/* Prevent content overflow on small screens */
img, video { max-width: 100%; height: auto; }
.post, #marketplaceContent, #activityContent, #entertainmentContent {
  word-break: break-word;
  overflow-wrap: anywhere;
}

@media (max-width: 640px) {
  /* Slightly tighter spacing on mobile to prevent clipping */
  #marketplaceContent, #activityContent, #entertainmentContent { padding-left: 12px; padding-right: 12px; }
}

/* === Bottom Navigation (Pill) === */
#bottom-nav {
  position: fixed;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 40; /* below sidebars (z-50), above map */
  padding-bottom: max(env(safe-area-inset-bottom), 6px);
  background: transparent;
}

#bottom-nav .bottom-pill {
  pointer-events: auto;
  margin: 0 auto 8px auto;
  width: min(92%, 900px);
  display: grid;
  grid-template-columns: 1fr 1fr minmax(160px, 2fr) 1fr 1fr;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 9999px;
  background: rgba(0,0,0,0.9);
  border: 1px solid #eab308; /* gold */
  box-shadow: 0 8px 22px rgba(0,0,0,0.6);
  backdrop-filter: saturate(1.2) blur(2px);
  position: relative;
  z-index: 99991;
}

/* Light theme pill */
body.theme-light #bottom-nav .bottom-pill {
  background: rgba(255, 253, 240, 0.95);
  border-color: #eab308; /* yellow-500 */
  box-shadow: 0 8px 22px rgba(100, 60, 0, 0.18);
}

/* Ensure the floating FAB container is visible by default */
#floatingLocateBtn { display: flex; }

/* Fallback layout/styles for the floating FAB if Tailwind isn't applied yet */
#floatingLocateBtn {
  position: fixed;
  right: 1rem;          /* ~right-4 */
  bottom: 4rem;         /* ~bottom-16 (above bottom nav) */
  z-index: 100100;
  flex-direction: column;
  align-items: flex-end;
}
#fabMain {
  width: 48px; height: 48px;          /* ~w-12 h-12 */
  border-radius: 9999px;
  background: #000; color: #facc15;   /* black + gold */
  border: 1px solid #eab308;          /* yellow-500 */
  display: flex; align-items: center; justify-content: center;
}
#fabCorner {
  position: absolute; right: -2px; bottom: -2px;
}
#fabMenu { position: absolute; }

/* FAB speedâ€‘dial buttons: ensure dark mode styling is consistent */
#fabMenu button {
  background: #0b0b0b !important;
  color: #facc15 !important;
  border-color: #eab308 !important;
}
body.theme-light #fabMenu button {
  background: #ffffff !important;
  color: #000000 !important;
}

/* Buttons in the pill */
#bottom-nav .pill-item { display: flex; align-items: center; justify-content: center; }
#bottom-nav .pill-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  background: transparent;
  border: 0;
  color: #f5e6a2; /* muted gold text */
  cursor: pointer;
}
#bottom-nav .icon-wrap {
  width: 40px; height: 40px;
  display: flex; align-items: center; justify-content: center;
  border-radius: 9999px;
  background: rgba(255, 215, 0, 0.1);
  border: 1px solid rgba(234, 179, 8, 0.35);
  transition: background .2s ease, color .2s ease, border-color .2s ease, transform .1s ease;
}
#bottom-nav .icon-wrap svg { width: 22px; height: 22px; }
#bottom-nav .pill-btn:hover .icon-wrap { transform: translateY(-1px); }
#bottom-nav .label { font-size: 12px; line-height: 1; opacity: 0.95; }

/* Active (gold) */
#bottom-nav .pill-item.active .icon-wrap {
  background: #eab308; /* gold */
  color: #000;
  border-color: #eab308;
}
#bottom-nav .pill-item.active .icon-wrap svg { stroke: #000; }
#bottom-nav .pill-item.active .label { color: #facc15; font-weight: 600; }

/* Light theme adjustments */
body.theme-light #bottom-nav .pill-btn { color: #8a5a00; }
body.theme-light #bottom-nav .icon-wrap { background: rgba(255, 247, 219, 0.9); border-color: rgba(234, 179, 8, 0.6); }
body.theme-light #bottom-nav .pill-item.active .label { color: #a16207; }

/* Remove legacy bar look in light theme too */
body.theme-light #bottom-nav { background: transparent; }

/* === Search === */
/* Search inside the pill */
.search-wrapper {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 100%;
}

.search-wrapper input {
  width: 100%;
  padding: 8px 12px;
  font-size: 15px;
  background: #0b0b0b;
  color: gold;
  border: 1px solid #eab308;
  border-radius: 9999px;
  box-shadow: inset 0 0 0 1px rgba(234,179,8,0.15), 0 0 8px rgba(255, 215, 0, 0.15);
  outline: none;
}

body.theme-light .search-wrapper input {
  background: #fffef4;
  color: #92400e;
  border-color: #eab308;
  box-shadow: inset 0 0 0 1px rgba(234,179,8,0.15), 0 0 8px rgba(234, 179, 8, 0.18);
}

/* Keep Mapbox controls visible above the pill */
.mapboxgl-ctrl-bottom-left, .mapboxgl-ctrl-bottom-right { margin-bottom: 112px !important; }

/* Responsive tweaks */
@media (max-width: 640px) {
  /* Leave space for the FAB on the right and compress spacing */
  #bottom-nav .bottom-pill {
    width: min(94%, 900px);
    margin-right: auto; /* center pill */
    grid-template-columns: auto auto minmax(108px, 1fr) auto auto;
    gap: 6px;
    padding: 8px 10px;
  }
  #bottom-nav .icon-wrap { width: 30px; height: 30px; }
  #bottom-nav .icon-wrap svg { width: 18px; height: 18px; }
  #bottom-nav .label { display: none; }
  .search-wrapper input { padding: 7px 36px 7px 12px; font-size: 14px; }
  #filterBtn { width: 30px; height: 30px; right: 4px; }
}

/* Raise FAB a bit on all devices and slightly more on mobile */
body #floatingLocateBtn { bottom: 6.25rem !important; }
@media (max-width: 640px) {
  body #floatingLocateBtn { bottom: 7.0rem !important; right: 0.75rem; }
}

/* Ensure filter button is above all for taps */
#filterBtn { z-index: 100000; }

/* Responsive verified card: compact on small/medium screens */
@media (max-width: 768px) {
  .custom-popup { width: min(80vw, 280px); }
  .custom-popup.verified, .vcard { width: min(80vw, 290px); }
  .custom-popup.verified {
    grid-template-columns: 1fr;
    grid-template-areas:
      'badge'
      'image'
      'title'
      'desc'
      'hours'
      'actions';
  }
  .custom-popup.verified .hero-image { width: 100%; height: 90px; }
  .custom-popup .title { font-size: 0.88rem; }
  .custom-popup .desc { font-size: 0.76rem; }
  /* vcard responsive stack */
  .vgrid { grid-template-columns: 1fr; gap: 10px; }
  .vhero { height: 100px; }
  .vtitle { font-size: 14px; }
  .vdesc { font-size: 12px; line-height: 1.32; }
  .vicon { width: 28px; height: 28px; }
  .vactions { grid-template-columns: 1fr; }
  .vbtn { padding: 8px 10px; font-size: 13.5px; }
}

/* Ensure the pill search cell can shrink on small screens */
#bottom-nav .pill-search { min-width: 108px; }

@media (min-width: 1024px) {
  #bottom-nav .bottom-pill { width: min(86%, 960px); }
}

.modal input,
#loginModal input {
  width: 100%;
  margin-bottom: 8px;
  padding: 6px;
  background: #111;
  border: 1px solid #555;
  color: gold;
  border-radius: 6px;
  font-size: 16px;
}

input,
textarea,
select {
  font-size: 16px;
}

.modal button,
#loginModal button {
  background: gold;
  color: black;
  border: none;
  padding: 6px 12px;
  font-weight: bold;
  border-radius: 6px;
  cursor: pointer;
}

/* === Legacy Newsfeed Sidebar (CSS-driven) === */
#newsfeed-sidebar {
  position: fixed;
  top: 0;
  right: 0;
  height: 100%;
  width: 100%;
  max-width: 28rem;
  background: black;
  color: gold;
  z-index: 50;
  transform: translateX(100%);
  transition: transform 0.3s ease-in-out;
  display: flex;
  flex-direction: column;
  border-left: 2px solid gold;
}

body.theme-light #newsfeed-sidebar {
  background: #fffef4;
  color: #2f1b00;
  border-left-color: #d97706;
}

#newsfeed-sidebar.active {
  transform: translateX(0);
}

.newsfeed-content {
  flex: 1;
  overflow-y: auto;
  padding: 1rem;
}

.post {
  background: black;
  color: gold;
  border: 1px solid gold;
  border-radius: 12px;
  padding: 1rem;
  margin-bottom: 1rem;
}

body.theme-light .post {
  background: #fff8e1;
  color: #2f1b00;
  border-color: #d97706;
}

.like-btn {
  display: flex;
  align-items: center;
  gap: 6px;
  border: 1px solid gold;
  padding: 4px 8px;
  border-radius: 6px;
  margin-top: 0.5rem;
  background: transparent;
  color: gold;
}

body.theme-light .like-btn {
  border-color: #d97706;
  color: #92400e;
}

.like-btn.liked {
  background: #f87171;
}

#postForm {
  padding: 1rem;
  background: black;
  border-top: 1px solid gold;
}

/* === Suggestion Box === */
#suggestions {
  /* Positioning is handled by Tailwind (top-[105%]) in bottomNav.html. */
  background: black;
  border: 1px solid gold;
  border-radius: 10px;
  z-index: 9999;
  max-height: 200px;
  overflow-y: auto;
  display: none;
  padding: 4px 0;
}

#suggestions.visible {
  display: block;
}

.suggestion-item {
  padding: 8px 12px;
  font-size: 14px;
  color: gold;
  cursor: pointer;
}

.suggestion-item:hover {
  background-color: #333;
}

/* === Utility === */
.hidden {
  display: none !important;
}
#profileMenu.hidden {
  display: none !important;
}
#helpJoinBtn {
  position: fixed !important;
  bottom: 11rem !important;
  right: 1rem !important;
  z-index: 100000 !important; /* above FAB selector */
  pointer-events: auto !important;
}

/* Compact help badges so they don't crowd headers */
.help-badge,
#activityInfoBtn,
#entertainmentInfoBtn,
#marketplaceInfoBtn,
#requestHelpBtn {
  line-height: 1;
  box-shadow: 0 0 10px rgba(253, 224, 71, 0.15);
  z-index: 60;
  pointer-events: auto;
}
#favouritesDropdown { z-index: 100600 !important; }

/* Filter panel entrance animation (slide + fade) */
#filterPanel > div {
  transform: translateY(10px);
  opacity: 0;
  transition: transform 220ms cubic-bezier(0.22, 1, 0.36, 1), opacity 220ms ease;
  will-change: transform, opacity;
}
#filterPanel:not(.hidden) > div {
  transform: translateY(0);
  opacity: 1;
}

/* Filter panel portal (fallback) */
#filterPanelPortal { pointer-events: auto; position: fixed; z-index: 100600 !important; width: 18rem; min-width: 16rem; }
#filterPanelPortal > div {
  transform: translateY(10px);
  opacity: 0;
  transition: transform 220ms cubic-bezier(0.22, 1, 0.36, 1), opacity 220ms ease;
  will-change: transform, opacity;
}
#filterPanelPortal:not(.hidden) > div { transform: translateY(0); opacity: 1; }

/* Light mode: Filter panel readability */
body.theme-light #filterPanel > div {
  background-color: #fff9e6 !important;   /* cream */
  color: #2f1b00 !important;               /* dark text */
  border-color: #d97706 !important;        /* warm brown border */
}
body.theme-light #filterPanelPortal > div {
  background-color: #fff9e6 !important;
  color: #2f1b00 !important;
  border-color: #d97706 !important;
}
body.theme-light #filterPanel [class*="text-yellow-"] {
  color: #2f1b00 !important;               /* darken labels/chips */
}
body.theme-light #filterPanelPortal [class*="text-yellow-"] {
  color: #2f1b00 !important;
}
body.theme-light #filterPanel [class*="border-yellow-"] {
  border-color: #d97706 !important;
}
body.theme-light #filterPanelPortal [class*="border-yellow-"] {
  border-color: #d97706 !important;
}
body.theme-light #filterPanel [class*="bg-black"] {
  background-color: #fff7d6 !important;    /* lighten card rows */
  color: #2f1b00 !important;
}
body.theme-light #filterPanelPortal [class*="bg-black"] {
  background-color: #fff7d6 !important;
  color: #2f1b00 !important;
}

/* Light mode readability overrides for request modal */
body.theme-light #requestModal input,
body.theme-light #requestModal textarea {
  background-color: #fffef4 !important;
  color: #2f1b00 !important;
  border-color: #d97706 !important;
}
body.theme-light #requestModal input::placeholder,
body.theme-light #requestModal textarea::placeholder {
  color: #92400e !important;
  opacity: 0.9;
}

/* Activity post input in light mode */
body.theme-light #activityPostForm input#postInput {
  background-color: #fff8e1 !important;
  color: #2f1b00 !important;
  border-color: #d97706 !important;
}

/* Mobile: keep the Activity post box anchored and account for safe area */
@media (max-width: 640px) {
  #activityPostForm {
    bottom: env(safe-area-inset-bottom, 0px);
  }
  #marketplacePostForm {
    bottom: env(safe-area-inset-bottom, 0px);
  }
}

/* Prevent iOS zoom on focus by using >=16px font-size */
#bottom-nav #search,
input#postInput {
  font-size: 16px;
}
input#marketplacePostInput { font-size: 16px; }



/* Light mode: Activity sidebar readability */
body.theme-light #activitySidebar {
  background-color: #fff9e6; /* cream panel */
  color: #2f1b00;           /* dark readable text */
}
/* Lighten any dark backgrounds inside the sidebar (cards, sticky header, etc.) */
body.theme-light #activitySidebar [class*="bg-black"] {
  background-color: #fff7d6 !important; /* soft cream */
  color: #2f1b00 !important;
}
/* Make borders match the light palette */
body.theme-light #activitySidebar [class*="border-yellow-"] {
  border-color: #d97706 !important;
}

/* Light mode: Marketplace + Entertainment sidebars readability */
body.theme-light #marketplaceSidebar,
body.theme-light #entertainmentSidebar {
  background-color: #fff9e6;
  color: #2f1b00;
}
body.theme-light #marketplaceSidebar [class*="bg-black"],
body.theme-light #entertainmentSidebar [class*="bg-black"] {
  background-color: #fff7d6 !important;
  color: #2f1b00 !important;
}
body.theme-light #marketplaceSidebar [class*="border-yellow-"],
body.theme-light #entertainmentSidebar [class*="border-yellow-"] {
  border-color: #d97706 !important;
}

/* Sticky headers/buttons in sidebars */
body.theme-light #marketplaceCategoryButtons,
body.theme-light #entertainmentCategoryButtons {
  background-color: #fff7d6 !important;
  border-bottom-color: #d97706 !important;
}
body.theme-light #marketplaceCategoryButtons .categoryBtn,
body.theme-light #entertainmentCategoryButtons .entCategoryBtn {
  color: #2f1b00 !important;
  border-color: #d97706 !important;
}

/* === FAQ Panel Light Theme === */
body.theme-light #faqPanel {
  background-color: #fffef4 !important;  /* soft cream */
  color: #2f1b00 !important;             /* dark readable text */
  border-color: #eab308 !important;      /* golden border */
}
body.theme-light #faqPanel [class*="text-yellow-"] {
  color: #2f1b00 !important;
}
body.theme-light #faqPanel [class*="border-yellow-"] {
  border-color: #d97706 !important;      /* warm brown */
}
body.theme-light #faqPanel [class*="bg-black"],
body.theme-light #faqPanel .bg-zinc-900\/80 {
  background-color: #fffaf0 !important;  /* lighten embedded dark blocks */
  color: #2f1b00 !important;
}
/* Question buttons */
body.theme-light #faqQuestions button {
  background-color: #fffef8 !important;
  color: #2f1b00 !important;
  border-color: #d97706 !important;
}
body.theme-light #faqQuestions button:hover {
  background-color: #fde68a !important;  /* soft yellow hover */
  color: #1f1300 !important;
}

.marker {
  background-image: url('flower.png'); /* or SVG */
  background-size: cover;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  cursor: pointer;
  position: relative; /* allow halo pseudo-element */
}

/* Soft pink/red glow beneath EVENT pins only */
.marker.event-marker::after {
  content: '';
  position: absolute;
  left: 50%;
  bottom: -12px;
  transform: translateX(-50%);
  width: 36px;
  height: 14px;
  background: radial-gradient(circle, rgba(236,72,153,0.55) 0%, rgba(236,72,153,0) 70%); /* rose-500 */
  pointer-events: none;
}

/* === Activity header chips (smaller + glow) === */
#activityCommunityMeta {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 6px;
}

#activityCommunityMeta > span {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 2px 7px;
  border: 1px solid currentColor;
  border-radius: 9999px;
  font-size: 0.7rem;
  letter-spacing: 0.08em;
  text-transform: none;
  background: radial-gradient(circle at 30% 20%, rgba(250,204,21,0.22), rgba(250,204,21,0.06) 70%);
  box-shadow: 0 0 10px rgba(250,204,21,0.28);
}

#activityCommunityMeta > span i {
  width: 12px;
  height: 12px;
  filter: drop-shadow(0 0 6px rgba(250, 204, 21, 0.65));
}

body.theme-light #activityCommunityMeta > span {
  background: radial-gradient(circle at 30% 20%, rgba(217,119,6,0.18), rgba(217,119,6,0.06) 70%);
  box-shadow: 0 0 8px rgba(217,119,6,0.25);
}

body.theme-light #activityCommunityMeta > span i {
  filter: drop-shadow(0 0 6px rgba(217, 119, 6, 0.5));
}
.mapboxgl-popup-content {
  padding: 0 !important;
  background: transparent !important;
  box-shadow: none !important;
  border: none !important;
  max-width: none !important;
}

.mapboxgl-popup-tip {
  display: none !important;
}
/* Base popup card (light-mode forward, but still ok in dark) */
.custom-popup {
  background: #fff9e6;
  border: 1.5px solid #f59e0b;
  border-radius: 18px;
  padding: 0.75rem 1rem;
  width: 220px;
  color: #3a2600;
  font-family: 'Inter', sans-serif;
  box-shadow: 0 16px 42px rgba(0,0,0,0.28);
  position: relative;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
  transition: all 0.2s ease-in-out;
}

/* Professional verified card */
.vcard {
  width: 380px;
  background: #fffaf0; /* light theme */
  border: 1px solid #f4c977;
  border-radius: 20px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.10);
  padding: 16px;
  color: #2f1b00;
  position: relative;
}
/* Dark theme for verified card */
body.theme-dark .vcard {
  background: #0b0b0b !important;
  border-color: rgba(234,179,8,0.5) !important;
  color: #facc15 !important;
}
body.theme-dark .vbadge { background: rgba(253,224,71,0.08) !important; border-color: rgba(234,179,8,0.5) !important; color: #facc15 !important; }
body.theme-dark .vicon { background: #111 !important; border-color: rgba(234,179,8,0.4) !important; color: #facc15 !important; }
body.theme-dark .vhero { border-color: rgba(234,179,8,0.3) !important; }
body.theme-dark .vtitle { color: #f3e8ff !important; }
body.theme-dark .vdesc { color: #fef3c7 !important; }
body.theme-dark .vmeta { color: #fde68a !important; }
body.theme-dark .vactions { border-top-color: rgba(234,179,8,0.2) !important; }
body.theme-dark .vbtn { background: #111 !important; color: #facc15 !important; border-color: rgba(234,179,8,0.5) !important; }
body.theme-dark .vbtn.vprimary { background: #eab308 !important; color: #000 !important; border-color: #eab308 !important; }
.vcard-top { display: flex; align-items: center; justify-content: flex-start; gap: 8px; }
.vbadge { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 999px; border: 1px solid #f4c977; background: #fff6d8; font-weight: 700; font-size: 11px; text-transform: uppercase; letter-spacing: .12em; color: #7c2d12; }
.vbadge i { font-style: normal; }
.vicon { width: 32px; height: 32px; border-radius: 999px; display: grid; place-items: center; background: #ffffff; border: 1px solid #e6c17a; color: #7c2d12; }
.vicon.fav { margin-left: auto; }
.vicon.close { margin-left: 4px; }
.vgrid { display: grid; grid-template-columns: 150px 1fr; gap: 14px; margin-top: 12px; }
.vhero { width: 100%; height: 150px; border-radius: 14px; background-size: cover; background-position: center; border: 1px solid #ecd9a3; }
.vbody { display: grid; gap: 6px; align-content: start; }
.vtitle { font-size: 18px; font-weight: 800; color: #6d2d00; }
.vdesc { font-size: 14px; color: #3c2a06; line-height: 1.45; }
.vmeta { display: inline-flex; align-items: center; gap: 6px; color: #8a6a00; font-size: 13px; }
.vactions { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; border-top: 1px solid #efdfb1; margin-top: 14px; padding-top: 12px; }
.vbtn { display: inline-flex; align-items: center; justify-content: center; gap: 8px; padding: 10px 12px; border-radius: 999px; border: 1px solid #caa96b; background: #ffffff; color: #6b3d00; font-weight: 700; }
.vbtn.vprimary { border: 1px solid #f59e0b; background: #f59e0b; color: #1a1200; }
.vbtn i[data-lucide] { width: 16px; height: 16px; }

.custom-popup.verified {
  /* Landscape, polished layout */
  width: 380px;
  box-shadow: 0 10px 28px rgba(253, 224, 71, 0.22), 0 0 0 1px rgba(253, 224, 71, 0.18);
  border-radius: 16px;
  gap: 0.6rem;
  display: grid;
  grid-template-columns: 136px 1fr;
  grid-template-rows: auto auto auto auto;
  grid-template-areas:
    'badge  badge'
    'image  title'
    'image  desc'
    'image  hours'
    'actions actions';
  align-items: center;
}

.custom-popup.verified .verified-badge {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.7rem;
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  justify-content: center;
  padding: 0.22rem 0.5rem; /* tighter chip */
  border: 1px solid rgba(253, 224, 71, 0.55);
  border-radius: 9999px;
  align-self: center;
  grid-area: badge;
  place-self: center;
  background: linear-gradient(180deg, rgba(253,224,71,0.18), rgba(253,224,71,0.06));
  box-shadow: 0 1px 0 rgba(0,0,0,0.4), 0 0 12px rgba(253,224,71,0.25);
  position: relative;
  overflow: hidden;
}

/* Subtle shiny sweep across the verified chip */
.custom-popup.verified .verified-badge::after {
  content: '';
  position: absolute;
  top: 0;
  left: -120%;
  width: 60%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.45), transparent);
  opacity: 0.6;
  transform: skewX(-20deg);
  animation: badgeSheen 3s ease-in-out infinite;
}

@keyframes badgeSheen {
  0%, 60% { left: -120%; }
  100%   { left: 140%; }
}

.custom-popup.verified .hero-image {
  width: 100%;
  height: 130px;
  border-radius: 12px;
  background-size: cover;
  background-position: center;
  box-shadow: inset 0 0 0 1px rgba(253, 224, 71, 0.25);
  grid-area: image;
}

.custom-popup .rose {
  font-size: 0.9rem;
}

.custom-popup.verified .title { grid-area: title; text-align: left; padding-left: 0.25rem; font-size: 1.05rem; font-weight: 700; }

.custom-popup.verified .desc { grid-area: desc; text-align: left; color: #5b3700; line-height: 1.35; }

.custom-popup.verified .hours {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 0.4rem;
  font-size: 0.78rem;
  color: #9a6700;
  justify-content: flex-start;
  grid-area: hours;
}

.custom-popup.verified .hours i {
  color: inherit;
}

.custom-popup.verified .actions { gap: 0.6rem; grid-area: actions; padding-top: 0.35rem; border-top: 1px solid rgba(253,224,71,0.15); }

.custom-popup.verified .actions .visit {
  background: linear-gradient(135deg, #fde68a, #f97316);
  color: #1a1300;
  border: none;
  box-shadow: 0 0 14px rgba(251, 191, 36, 0.4);
}

.custom-popup.verified .actions .visit:hover {
  background: linear-gradient(135deg, #facc15, #f97316);
}

.custom-popup .title {
  font-size: 1rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: 0.5rem;
  justify-content: center;
  text-align: center;
}

.custom-popup .desc {
  font-size: 0.85rem;
  color: #d4af37;
  text-align: center;
}

.custom-popup .close-btn,
.custom-popup .favourite-btn,
.custom-popup .share-btn {
  position: absolute;
  top: 8px;
  background: none;
  border: none;
  color: #facc15;
  cursor: pointer;
}

/* Dark theme for normal popups */
body.theme-dark .custom-popup {
  background: #0b0b0b !important;
  border-color: rgba(234,179,8,0.5) !important;
  color: #facc15 !important;
  box-shadow: 0 0 12px rgba(234, 179, 8, 0.25) !important;
}
body.theme-dark .custom-popup .desc { color: #fde68a !important; }
body.theme-dark .custom-popup .actions button:hover { background: rgba(234,179,8,0.12) !important; }

/* Category chip for normal popups */
.custom-popup .category {
  font-size: 0.78rem;
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  padding: 0.24rem 0.55rem;
  border: 1px solid currentColor;
  border-radius: 9999px;
  align-self: center;
}
body.theme-light .custom-popup .category {
  color: #7c2d12;
  border-color: #d97706;
  background: rgba(217,119,6,0.06);
}
body.theme-dark .custom-popup .category {
  color: #facc15;
  border-color: rgba(234,179,8,0.5);
  background: rgba(234,179,8,0.06);
}

body.theme-light .custom-popup {
  background: linear-gradient(to bottom right, #fffef4, #fff5ce);
  border-color: #d97706;
  color: #7c2d12;
  box-shadow: 0 0 12px rgba(217, 119, 6, 0.45);
}

body.theme-light .custom-popup .desc {
  color: #b45309;
}

body.theme-light .custom-popup .close-btn,
body.theme-light .custom-popup .favourite-btn,
body.theme-light .custom-popup .share-btn {
  color: #d97706;
}

body.theme-light .custom-popup .title {
  color: #92400e;
}

.custom-popup .actions {
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  justify-content: center;
}

.custom-popup .actions button {
  display: inline-flex;
  align-items: center;
  gap: 0.35rem;
  font-size: 0.7rem;
  padding: 0.35rem 0.6rem;
  border: 1px solid currentColor;
  border-radius: 9999px;
  background: transparent;
  color: inherit;
  cursor: pointer;
  transition: background 0.2s ease;
}

.custom-popup .actions button:hover {
  background: rgba(250, 204, 21, 0.15);
}

body.theme-light .custom-popup .actions button:hover {
  background: rgba(217, 119, 6, 0.15);
}

body.theme-light .bg-black {
  background-color: #fff8e1 !important;
  color: #2f1b00 !important;
}

body.theme-light .text-yellow-500,
body.theme-light .text-yellow-400,
body.theme-light .text-yellow-300,
body.theme-light .text-yellow-200,
body.theme-light .text-yellow-100 {
  color: #92400e !important;
}

.marker.verified-marker {
  filter: drop-shadow(0 0 10px rgba(253, 224, 71, 0.9));
  animation: goldPulse 1.6s ease-in-out infinite alternate;
  position: relative;
}

/* Soft halo beneath the pin */
.marker.verified-marker::after {
  content: '';
  position: absolute;
  left: 50%;
  bottom: -12px;
  transform: translateX(-50%);
  width: 42px;
  height: 16px;
  background: radial-gradient(circle, rgba(253, 224, 71, 0.6) 0%, rgba(253, 224, 71, 0) 70%);
  pointer-events: none;
}

/* Radiating gold ring */
.marker.verified-marker::before {
  content: '';
  position: absolute;
  inset: -6px; /* start just outside the pin */
  border-radius: 9999px;
  box-shadow: 0 0 0 2px rgba(253, 224, 71, 0.55);
  animation: goldRipple 1.8s ease-out infinite;
  pointer-events: none;
}

@keyframes goldPulse {
  from { filter: drop-shadow(0 0 8px rgba(253, 224, 71, 0.55)); }
  to   { filter: drop-shadow(0 0 18px rgba(253, 224, 71, 0.95)); }
}

@keyframes goldRipple {
  0%   { opacity: 0.55; transform: scale(0.9); box-shadow: 0 0 0 2px rgba(253, 224, 71, 0.55); }
  70%  { opacity: 0.12; transform: scale(1.6); box-shadow: 0 0 0 2px rgba(253, 224, 71, 0.15); }
  100% { opacity: 0; transform: scale(1.8); box-shadow: 0 0 0 2px rgba(253, 224, 71, 0.0); }
}

/* Stronger readable override for any yellow text utilities (including opacity variants) */
body.theme-light [class*="text-yellow-"] {
  color: #2f1b00 !important;
}

/* Ensure all black-based backgrounds flip in light mode, including opacity variants */
/* Removed overly broad bg-black override to avoid turning full-screen overlays cream. */

/* Subtle slide animation polish for filter toggles */
.tg-toggle { will-change: background, box-shadow; }
.tg-knob { will-change: transform; }

body.theme-light .border-yellow-500,
body.theme-light .border-yellow-400,
body.theme-light .border-yellow-300 {
  border-color: #d97706 !important;
}

body.theme-light .bg-yellow-500 {
  background-color: #fbbf24 !important;
  color: #1f2937 !important;
}

.badge-chip {
  display: inline-flex;
  align-items: center;
  gap: 0.2rem;
  border: 1px solid currentColor;
  border-radius: 9999px;
  padding: 0.15rem 0.4rem;
  font-size: 0.55rem;
  text-transform: uppercase;
  letter-spacing: 0.08em;
  color: #facc15;
}

/* Ensure icons scale down within chips */
.badge-chip svg {
  width: 12px;
  height: 12px;
}

body.theme-light .badge-chip {
  color: #92400e;
  border-color: #d97706;
  background-color: rgba(217, 119, 6, 0.12);
}

.custom-popup .close-btn { left: 8px; }
.custom-popup .favourite-btn { right: 8px; }
.custom-popup .share-btn { right: 40px; }

#postForm:has(+ #lockedNewsModal:not(.hidden)) {
  pointer-events: none;
  opacity: 0.5;
  filter: blur(2px);
}
/* ðŸ“¦ Onboarding Modal Layout */
#onboardingModal {
  position: fixed;
  inset: 0;
  /* Ensure onboarding sits above FAB and help button */
  z-index: 100800;
  background-color: rgba(0, 0, 0, 0.9);
  overflow-y: auto;
  padding: 2rem 1rem;
}
#onboardingModal .modal-content {
  max-width: 42rem;
  margin: 0 auto;
  background-color: #000;
  border: 1px solid #facc15;
  border-radius: 1rem;
  padding: 2rem;
  color: #facc15;
  box-shadow: 0 0 40px rgba(255, 255, 255, 0.1);
}

/* Request modal panel sizing so it never fills the page */
#requestModal > div {
  width: calc(100vw - 2rem);
  max-width: 28rem; /* ~max-w-md */
  max-height: 85vh;
  overflow-y: auto;
}
/* ðŸ’« Smooth Entrance */
@keyframes fadeIn {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Logged-in state helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
.logged-in #lockedMarketplaceModal,
.logged-in #lockedNewsModal,
.logged-in #lockedEntertainmentModal {
  display: none !important;
}

.logged-in #marketplacePostForm,
.logged-in #postForm {
  opacity: 1 !important;
  filter: none !important;
  pointer-events: auto !important;
}
#onboardingModal {
  animation: fadeIn 0.4s ease;
}

/* Hide floating UI while onboarding is open */
.onboarding-open #helpJoinBtn { display: none !important; }
.onboarding-open #floatingLocateBtn { display: none !important; }
.marketplace-tab {
  padding: 0.5rem 1rem;
  border: 1px solid transparent;
  border-radius: 9999px;
  font-weight: 600;
  background-color: transparent;
  transition: all 0.2s ease;
}
.marketplace-tab:hover {
  border-color: gold;
  background-color: #1a1a1a;
}
.marketplace-tab.active {
  border-color: gold;
  background-color: #ffd70020;
  color: gold;
}
.active-category {
  background-color: #facc15 !important; /* yellow-400 */
  color: black !important;
  border-color: #fde047 !important; /* lighter yellow border */
  box-shadow: 0 0 10px #fde047, 0 0 5px #facc15;
}
.loader {
  border: 4px solid black;
  border-top: 4px solid gold;
  border-radius: 50%;
  width: 32px;
  height: 32px;
  animation: spin 1s linear infinite;
  margin: 0 auto;
}
@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}
@keyframes glowPulse {
  0%, 100% {
    box-shadow: 0 0 8px 2px rgba(255, 221, 0, 0.6),
                0 0 16px 4px rgba(255, 221, 0, 0.3);
  }
  50% {
    box-shadow: 0 0 16px 4px rgba(255, 221, 0, 0.9),
                0 0 24px 8px rgba(255, 221, 0, 0.5);
  }
}
/* Improve readability for Add Location inputs */
/* High-contrast inputs for Add Location */
#addLocationModal input,
#addLocationModal textarea,
#submissionModal input,
#submissionModal textarea {
  color: #ffffff !important;
  -webkit-text-fill-color: #ffffff; /* Safari/Brave */
  caret-color: #fde047; /* yellow-300 */
}
#addLocationModal ::placeholder,
#submissionModal ::placeholder {
  color: #facc15; /* yellow-400 */
  opacity: 0.9;
}
/* Compact chip icons in member meta */
#memberMeta i,
#memberMenuBadges i,
#memberCardStreakChip i,
#memberStreakChip i {
  width: 12px;
  height: 12px;
}
/* Gold glow utility for onboarding/CTA text */
.glow-gold, .glow-gold * {
  color: #FDE047; /* yellow-300 */
  text-shadow: 0 0 8px rgba(253, 224, 71, 0.45), 0 0 18px rgba(253, 224, 71, 0.25);
}

/* Force full gold text inside the Verification modal */
#verificationModal.glow-gold,
#verificationModal .glow-gold,
#verificationModal .glow-gold * {
  color: #FDE047 !important;
  text-shadow: 0 0 8px rgba(253, 224, 71, 0.55), 0 0 22px rgba(253, 224, 71, 0.3) !important;
}

/* Gold button glow */
.btn-gold-glow {
  box-shadow: 0 0 20px rgba(253, 224, 71, 0.35), 0 0 8px rgba(253, 224, 71, 0.25);
  transition: box-shadow 150ms ease, transform 120ms ease;
}
.btn-gold-glow:hover {
  box-shadow: 0 0 30px rgba(253, 224, 71, 0.5), 0 0 12px rgba(253, 224, 71, 0.35);
  transform: translateY(-1px);
}

/* Nudge tray animation */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

#saveNudge {
  animation: fadeUp 180ms ease-out;
}

/* Subtle animated gold glow utility for CTAs */
.glow-gold-animated, .glow-gold-animated * {
  color: #FDE047;
  text-shadow: 0 0 8px rgba(253,224,71,0.45), 0 0 18px rgba(253,224,71,0.25);
  animation: goldTextPulse 1.8s ease-in-out infinite;
}

@keyframes goldTextPulse {
  0%, 100% { text-shadow: 0 0 8px rgba(253,224,71,0.45), 0 0 18px rgba(253,224,71,0.25); }
  50% { text-shadow: 0 0 14px rgba(253,224,71,0.75), 0 0 30px rgba(253,224,71,0.45); }
}
#inboxPanel.inbox-panel, #chatPanel.chat-panel { }
/* Light theme variants for chat/inbox panels */
body.theme-light #inboxPanel,
body.theme-light #chatPanel {
  background: #fffef4 !important;
  color: #2f1b00 !important;
  border-color: #eab308 !important;
}
body.theme-light #inboxPanel > div:first-child,
body.theme-light #chatPanel > div:first-child {
  background: #fff7db !important;
  color: #92400e !important;
  border-color: #f5d35c !important;
}
body.theme-light #inboxList,
body.theme-light #chatBody,
body.theme-light #chatForm {
  background: #fffdf3 !important;
}
body.theme-light #chatInput {
  background: #fffaf0 !important;
  color: #2f1b00 !important;
  border-color: #eab308 !important;
}
#fabMenu { z-index: 100200; }
#fabCorner { pointer-events: auto; }
#filterPanel { pointer-events: auto; position: fixed; z-index: 100500 !important; width: 18rem; min-width: 16rem; }
#filterPanel.hidden { display: none !important; }
#faqPanel { pointer-events: auto; z-index: 100700 !important; }
/* ===== Generative-style glow for Search (ai-search) ===== */
.ai-search { position: relative; filter: drop-shadow(0 0 10px rgba(250,204,21,0.22)); }
.ai-search::before {
  content: '';
  position: absolute;
  inset: -2px; /* border outside */
  border-radius: 9999px;
  background: conic-gradient(from 0deg,
    rgba(250,204,21,0.0), rgba(250,204,21,0.35), rgba(234,179,8,0.0) 25%,
    rgba(236,72,153,0.2), rgba(250,204,21,0.0) 50%,
    rgba(59,130,246,0.18), rgba(250,204,21,0.0) 75%,
    rgba(250,204,21,0.35), rgba(250,204,21,0.0)
  );
  -webkit-mask: linear-gradient(#000 0 0) padding-box, linear-gradient(#000 0 0);
  -webkit-mask-composite: xor; mask-composite: exclude;
  animation: aiBorder 4s linear infinite;
  pointer-events: none;
}
.ai-search::after {
  content: '';
  position: absolute;
  inset: 0; border-radius: 9999px;
  background: radial-gradient(60% 140% at 30% 30%, rgba(250,204,21,0.10), transparent 60%);
  pointer-events: none;
}
.ai-input { position: relative; z-index: 1; box-shadow: 0 8px 22px rgba(0,0,0,0.22), inset 0 0 0 1px rgba(250,204,21,0.22); }
.ai-input:focus { box-shadow: 0 8px 26px rgba(250,204,21,0.22), inset 0 0 0 1px rgba(250,204,21,0.42); }
@keyframes aiBorder { to { transform: rotate(360deg); } }

/* Subtle sparkle near the search button while typing */
.ai-input::placeholder { transition: opacity .25s ease; }
.ai-input.ai-typing::after {
  content: '';
  position: absolute; right: 36px; top: 50%; transform: translateY(-50%);
  width: 10px; height: 10px; border-radius: 50%;
  background: radial-gradient(circle, rgba(250,204,21,0.85), rgba(250,204,21,0));
  animation: aiSparkle 1.2s ease-in-out infinite;
  pointer-events: none;
}
@keyframes aiSparkle {
  0%,100% { opacity: .25; transform: translateY(-50%) scale(.8); }
  50%     { opacity: .9;  transform: translateY(-50%) scale(1.1); }
}
